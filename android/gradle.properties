org.gradle.jvmargs=-Xmx6G -XX:MaxMetaspaceSize=1G -XX:+HeapDumpOnOutOfMemoryError -XX:+UseG1GC -XX:MaxGCPauseMillis=200
android.useAndroidX=true
android.enableJetifier=true

# 禁用 Profile Guided Optimization 以避免 profile_saver 崩溃
android.enableProfileJson=false

# 禁用不必要的构建功能以避免路径冲突
android.enableUnitTestBinaryResources=false
android.testInstrumentationRunnerArguments.notAnnotation=androidx.test.filters.FlakyTest

# 配置 Gradle 行为 - 48GB内存优化配置
org.gradle.configureondemand=false
org.gradle.parallel=true
org.gradle.caching=true
org.gradle.daemon=true
org.gradle.workers.max=4

# 禁用 Gradle 的构建缓存中的测试相关内容
org.gradle.unsafe.configuration-cache=false

# 禁用 Kotlin 编译守护进程(避免与 IDE 冲突)
kotlin.compiler.execution.strategy=in-process

# Android 16KB 页面大小支持
# See: https://developer.android.com/guide/practices/page-sizes#update-packaging
# 启用未压缩的原生库并正确对齐
android.bundle.enableUncompressedNativeLibs=true
# 启用 16KB 页面对齐(需要 AGP 8.5+)
android.bundle.16kPageAlignment=true
# 为APK构建启用16KB对齐支持
android.gradle.packagingOptions.jniLibs.useLegacyPackaging=false
# 确保APK打包时对所有native库进行正确对齐
android.experimental.enableUncompressedNativeLibs=true
# 配置Android Gradle Plugin使用最新的打包算法
android.useNewApkCreator=true
# 禁用可能干扰对齐的优化
android.enableUncompressedNativeLibsInApk=true
